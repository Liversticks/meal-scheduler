(this["webpackJsonpmeal-client"]=this["webpackJsonpmeal-client"]||[]).push([[0],{136:function(e,a,t){e.exports=t(170)},158:function(e,a,t){},170:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(31),s=t.n(l),o=t(36),c=t(37),i=t(39),m=t(54),d=t(52),u=t(65),p=t(9),b=(t(141),t(25)),h=t.n(b);t(158);function f(){return JSON.parse(localStorage.getItem("user"))}function E(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var g=t(185),v=t(183),y=t(89);var N=function(e){return r.a.createElement(g.a,{sticky:"top",collapseOnSelect:!0,expand:"sm",bg:"dark",variant:"dark"},r.a.createElement(y.LinkContainer,{to:"/"},r.a.createElement(g.a.Brand,null,"Meals")),r.a.createElement(g.a.Toggle,null),r.a.createElement(g.a.Collapse,null,r.a.createElement(v.a,{className:"mr-auto"},e.isLoggedIn&&r.a.createElement(y.LinkContainer,{to:"/profile",onClick:e.onProfile},r.a.createElement(v.a.Link,null,"Profile")),e.isLoggedIn&&r.a.createElement(v.a.Link,{href:"/login",onClick:e.onLogout},"Logout"),!e.isLoggedIn&&r.a.createElement(y.LinkContainer,{to:"/login"},r.a.createElement(v.a.Link,null,"Login")),!e.isLoggedIn&&r.a.createElement(y.LinkContainer,{to:"/signup"},r.a.createElement(v.a.Link,null,"Signup")))))},k=t(11),w=t(8),S=w.b().shape({username:w.d().required("Username is required").max(20,"Username cannot be more than 20 characters long"),email:w.d().email("Email is invalid").required("Email is required"),password:w.d().min(10,"Password must be at least 10 characters long").required("Password is required"),confirmPassword:w.d().oneOf([w.c("password"),null],"Passwords must match").required("Must confirm password"),birthday:w.a().required("Birthday is required")}),O=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={message:""},n}return Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement("h3",{className:"pb-2"},"Signup"),r.a.createElement(k.c,{initialValues:{username:"",email:"",password:"",confirmPassword:"",birthday:""},validationSchema:S,onSubmit:function(a,t){e.props.onSignup(a.username,a.email,a.password,a.birthday).then((function(a){a.data.message&&"Signed up successfully!"===a.data.message&&(e.setState({message:a.data.message}),setTimeout((function(){e.props.history.push("/login")}),2e3))})).catch((function(a){var n=a.response&&a.response.data&&a.response.data.message||a.message||a.toString();e.setState({message:n}),t.setSubmitting(!1)}))}},(function(a){var t=a.errors,n=a.touched;return r.a.createElement(k.b,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(k.a,{name:"username",type:"text",className:"form-control"}),n.username&&t.username&&r.a.createElement("div",{className:"alert alert-danger mt-2"},t.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement(k.a,{name:"email",type:"text",className:"form-control"}),n.email&&t.email&&r.a.createElement("div",{className:"alert alert-danger mt-2"},t.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(k.a,{name:"password",type:"password",className:"form-control"}),n.password&&t.password&&r.a.createElement("div",{className:"alert alert-danger mt-2"},t.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm Password"),r.a.createElement(k.a,{name:"confirmPassword",type:"password",className:"form-control"}),n.confirmPassword&&t.confirmPassword&&r.a.createElement("div",{className:"alert alert-danger mt-2"},t.confirmPassword)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"birthday"},"Birthday"),r.a.createElement(k.a,{name:"birthday",type:"date",className:"form-control"}),n.birthday&&t.birthday&&r.a.createElement("div",{className:"alert alert-danger mt-2"},t.birthday)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Sign Up"),r.a.createElement("button",{type:"reset",className:"btn btn-secondary"},"Reset")),e.state.message&&r.a.createElement("div",{className:"Signed up successfully!"===e.state.message?"alert alert-success mt-2":"alert alert-danger mt-2"},e.state.message))}))))))}}]),t}(r.a.Component),M=Object(p.o)(O),U=w.b().shape({username:w.d().required("Please enter your username."),password:w.d().required("Please enter your password.")}),B=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={message:""},n}return Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement("h3",{className:"pb-2"},"Meals App"),r.a.createElement(k.c,{initialValues:{username:"",password:""},validationSchema:U,onSubmit:function(a,t){e.props.onLogin(a.username,a.password).then((function(t){t.data.accessToken&&(localStorage.setItem("user",JSON.stringify(t.data)),localStorage.setItem("username",a.username)),e.props.onLoginSuccess(),e.props.history.push("/meals")})).catch((function(a){var n=a.response&&a.response.data&&a.response.data.message||a.message||a.toString();e.setState({message:n}),t.setSubmitting(!1)}))}},(function(a){var t=a.errors,n=a.touched,l=a.isSubmitting,s=a.isValidating;return r.a.createElement(k.b,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"align-middle",htmlFor:"username"},"Username"),r.a.createElement(k.a,{name:"username",type:"text",className:"form-control"}),n.username&&t.username&&r.a.createElement("div",{className:"alert alert-danger mt-2"},t.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(k.a,{name:"password",type:"password",className:"form-control"}),n.password&&t.password&&r.a.createElement("div",{className:"alert alert-danger mt-2"},t.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:l},(l||s)&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"}),r.a.createElement("span",null,"Login"))),e.state.message&&r.a.createElement("div",{className:"alert alert-danger mt-2"},e.state.message))}))))))}}]),t}(r.a.Component),j=Object(p.o)(B),C=t(177),P=t(15),L=t.n(P),x=t(18),D=t(179),q=t(180),Y=t(133),_=t(126),H=t(181),I=t(175),F=t(176),T=t(19),A=t(17),R={meal_url:"https://ls-meal-app.herokuapp.com/api/meals",login_url:"https://ls-meal-app.herokuapp.com/api/auth/login",signup_url:"https://ls-meal-app.herokuapp.com/api/auth/signup",users_url:"https://ls-meal-app.herokuapp.com/api/users",static_dir:"https://ls-meal-app.herokuapp.com/static/"},G=R.meal_url,z=new(function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"newMeal",value:function(e,a,t){return h.a.post(G,{date:e,meal_type:a,meal_desc:t},{headers:E()})}},{key:"editMeal",value:function(e,a,t){return h.a.put(G,{date:e,meal_type:a,meal_desc:t},{headers:E()})}},{key:"deleteMeal",value:function(e,a){return h()({url:G,method:"delete",headers:E(),data:{date:e,meal_type:a}})}}]),e}()),J=w.b().shape({description:w.d().required("Please describe your meal."),date:w.d().required(),type:w.d().required()}),V=["Meal details updated successfully!","Meal successfully deleted."];function W(e){var a=r.a.useState(""),t=Object(x.a)(a,2),n=t[0],l=t[1],s=L()(e.blob.date,"MM-DD-YYYY").format("MMMM Do"),o=e.blob.type.charAt(0).toUpperCase()+e.blob.type.slice(1);return r.a.createElement(H.a,{show:e.show,onHide:e.onHide,size:"lg",centered:!0},r.a.createElement(H.a.Header,{closeButton:!0},r.a.createElement(H.a.Title,null,o," for ",s)),r.a.createElement(H.a.Body,null,n.length>0?r.a.createElement(I.a,{variant:V.includes(n)?"success":"danger"},n):r.a.createElement(k.c,{initialValues:{date:e.blob.date,type:e.blob.type,description:e.blob.description},validationSchema:J,onSubmit:function(e,a){z.editMeal(e.date,e.type,e.description).then((function(e){l(e.data.message)})).catch((function(e){e.response?l(e.response.data.message):e.request?l(e.request):l(e.message)})),a.setSubmitting(!1)}},(function(e){var a=e.errors,t=e.touched;return r.a.createElement(k.b,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Meal description"),r.a.createElement(k.a,{name:"description",component:"textarea",className:"form-control",rows:"6"}),r.a.createElement("small",{className:"form-text text-muted"},"Change of heart? New meal ideas are always welcome."),t.description&&a.description&&r.a.createElement("div",{className:"alert alert-danger mt-2"},a.description)),r.a.createElement(F.a,{className:"float-right",type:"submit"},"Submit"))}))),r.a.createElement(H.a.Footer,null,""===n?r.a.createElement(F.a,{variant:"danger",onClick:function(){z.deleteMeal(e.blob.date,e.blob.type).then((function(e){l(e.data.message)})).catch((function(e){e.response?(l(e.response.data.message),console.log("first branch")):e.request?(l(e.request),console.log("second branch")):(console.log("third branch"),l(e.message)),console.log(e)}))}},r.a.createElement(T.a,{icon:A.g})," Delete Meal"):r.a.createElement(F.a,{variant:"success",onClick:function(){e.onHide(),l("")}},r.a.createElement(T.a,{icon:A.f})," Got it")))}var $=function(e){var a=r.a.useState(!1),t=Object(x.a)(a,2),n=t[0],l=t[1];return r.a.createElement(C.a,{fluid:!0},r.a.createElement(F.a,{className:"fill-button",variant:"info",onClick:function(){return l(!0)}},r.a.createElement(T.a,{className:"mr-1",icon:A.b})," Modify"),r.a.createElement(W,{show:n,onHide:function(){l(!1),e.onUpdate()},blob:e.blob}))},K=w.b().shape({description:w.d().required("Please describe your meal."),date:w.d().required(),type:w.d().required()});function Q(e){var a=r.a.useState(""),t=Object(x.a)(a,2),n=t[0],l=t[1],s=L()(e.blob.date,"MM-DD-YYYY").format("MMMM Do"),o=e.blob.type.charAt(0).toUpperCase()+e.blob.type.slice(1);return r.a.createElement(H.a,{show:e.show,onHide:e.onHide,size:"lg",centered:!0},r.a.createElement(H.a.Header,{closeButton:!0},r.a.createElement(H.a.Title,null,o," for ",s)),r.a.createElement(H.a.Body,null,n.length>0?r.a.createElement(I.a,{variant:"Meal scheduled successfully!"===n?"success":"danger"},n):r.a.createElement(k.c,{initialValues:{date:e.blob.date,type:e.blob.type,description:""},validationSchema:K,onSubmit:function(e,a){z.newMeal(e.date,e.type,e.description).then((function(e){l(e.data.message)})).catch((function(e){e.response?l(e.response.data.message):e.request?l(e.request):l(e.message)}))}},(function(e){var a=e.errors,t=e.touched;return r.a.createElement(k.b,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Meal description"),r.a.createElement(k.a,{name:"description",component:"textarea",className:"form-control",rows:"6"}),r.a.createElement("small",{className:"form-text text-muted"},"Describe the meal you will prepare."),t.description&&a.description&&r.a.createElement("div",{className:"alert alert-danger mt-2"},a.description)),r.a.createElement(F.a,{className:"float-right",type:"submit"},"Submit"))}))),n.length>0&&r.a.createElement(H.a.Footer,null,r.a.createElement(F.a,{className:"float-right",variant:"success",onClick:e.onHide},r.a.createElement(T.a,{icon:A.f})," Got it")))}var X=function(e){var a=r.a.useState(!1),t=Object(x.a)(a,2),n=t[0],l=t[1];return r.a.createElement(C.a,{fluid:!0,className:"fill-div"},r.a.createElement(F.a,{variant:"success",className:"fill-button",onClick:function(){return l(!0)}},r.a.createElement(T.a,{className:"mr-1",icon:A.i})," Sign Up"),r.a.createElement(Q,{show:n,onHide:function(){l(!1),e.onUpdate()},blob:e.blob}))},Z=t(186),ee=t(184),ae=t(178);function te(e){var a=L()(e.blob.date,"MM-DD-YYYY").format("MMMM Do"),t=e.blob.type.charAt(0).toUpperCase()+e.blob.type.slice(1);return r.a.createElement("div",null,r.a.createElement(H.a,{show:e.show,onHide:e.onHide,size:"lg",centered:!0},r.a.createElement(H.a.Header,{closeButton:!0},r.a.createElement(H.a.Title,null,t," for ",a)),r.a.createElement(H.a.Body,null,r.a.createElement(Z.a,null,r.a.createElement(Z.a.Body,null,r.a.createElement(Z.a.Subtitle,null,"Chef: ",e.blob.chef),r.a.createElement(Z.a.Text,null,e.blob.description)))),r.a.createElement(H.a.Footer,null,r.a.createElement(F.a,{variant:"success",onClick:e.onHide},r.a.createElement(T.a,{icon:A.f})," Got it"))))}var ne=function(e){var a=r.a.useState(!1),t=Object(x.a)(a,2),n=t[0],l=t[1];return r.a.createElement(C.a,{fluid:!0,className:"fill-div"},r.a.createElement(ee.a,{placement:"top",overlay:r.a.createElement(ae.a,null,e.blob.description.length<=100?e.blob.description:e.blob.description.slice(0,100)+"...")},r.a.createElement(F.a,{variant:"light",className:"fill-button",onClick:function(){return l(!0)}},"Assigned to ",r.a.createElement("em",{className:"other-username"},e.blob.chef))),r.a.createElement(te,{show:n,onHide:function(){return l(!1)},blob:e.blob}))};var re=function(e){return e.blob.hasOwnProperty("chef")?e.blob.chef===function(){var e=localStorage.getItem("username");if(e&&e.length>0)return e}()?r.a.createElement($,{onUpdate:e.onUpdate,blob:e.blob}):r.a.createElement(ne,{blob:e.blob}):r.a.createElement(X,{onUpdate:e.onUpdate,blob:e.blob})};var le=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement(Y.a,null,r.a.createElement("div",{className:"day-of-week"},e.blob.dayOfWeek),r.a.createElement("div",null,e.blob.formattedDay),e.blob.holiday&&e.blob.holiday.length>0&&r.a.createElement("div",{className:"holiday"},e.blob.holiday)))),r.a.createElement("td",{className:"centered-cell"},r.a.createElement(re,{onUpdate:e.onUpdate,blob:e.blob.breakfastBlob})),r.a.createElement("td",{className:"centered-cell"},r.a.createElement(re,{onUpdate:e.onUpdate,blob:e.blob.lunchBlob})),r.a.createElement("td",{className:"centered-cell"},r.a.createElement(re,{onUpdate:e.onUpdate,blob:e.blob.dinnerBlob})),r.a.createElement("td",{className:"centered-cell"},r.a.createElement(re,{onUpdate:e.onUpdate,blob:e.blob.snackBlob})))};function se(e){for(var a=e.start,t=[];a.isSameOrBefore(e.end,"day");)t.push(a.format("L")),a=a.clone().add(1,"d");var n=t.map((function(a){var t=L()(a,"MM-DD-YYYY"),n={key:a,dayBlob:{formattedDay:t.format("MMMM Do"),dayOfWeek:t.format("dddd"),breakfastBlob:{date:a,type:"breakfast"},lunchBlob:{date:a,type:"lunch"},dinnerBlob:{date:a,type:"dinner"},snackBlob:{date:a,type:"snack"}}};return e.dates.hasOwnProperty(a)&&(e.dates[a].breakfast.hasOwnProperty("chef")&&(n.dayBlob.breakfastBlob.description=e.dates[a].breakfast.meal_desc,n.dayBlob.breakfastBlob.chef=e.dates[a].breakfast.chef),e.dates[a].lunch.hasOwnProperty("chef")&&(n.dayBlob.lunchBlob.description=e.dates[a].lunch.meal_desc,n.dayBlob.lunchBlob.chef=e.dates[a].lunch.chef),e.dates[a].dinner.hasOwnProperty("chef")&&(n.dayBlob.dinnerBlob.description=e.dates[a].dinner.meal_desc,n.dayBlob.dinnerBlob.chef=e.dates[a].dinner.chef),e.dates[a].snack.hasOwnProperty("chef")&&(n.dayBlob.snackBlob.description=e.dates[a].snack.meal_desc,n.dayBlob.snackBlob.chef=e.dates[a].snack.chef),n.dayBlob.holiday=e.dates[a].holiday),n})).map((function(a){return r.a.createElement(le,{key:a.key,onUpdate:e.onUpdate,blob:a.dayBlob})}));return r.a.createElement("div",null,r.a.createElement(D.a,{responsive:!0,striped:!0,bordered:!0,className:"mt-3"},r.a.createElement("colgroup",null,r.a.createElement("col",{className:"table-even"}),r.a.createElement("col",{className:"table-even"}),r.a.createElement("col",{className:"table-even"}),r.a.createElement("col",{className:"table-even"}),r.a.createElement("col",{className:"table-even"})),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Date"),r.a.createElement("th",{className:"text-center"},"Breakfast"),r.a.createElement("th",{className:"text-center"},"Lunch"),r.a.createElement("th",{className:"text-center"},"Dinner"),r.a.createElement("th",{className:"text-center"},"Snack"))),r.a.createElement("tbody",null,n)))}var oe=function(e){var a=r.a.useState(e.opened),t=Object(x.a)(a,2),n=t[0],l=t[1],s=L()(e.start).format("MMMM Do"),o=L()(e.start).format()!==L()(e.end).startOf("day").format()?L()(e.start).month()===L()(e.end).month()?L()(e.end).format(" - Do"):L()(e.end).format(" - MMMM Do"):"";return r.a.createElement("div",null,r.a.createElement(q.a,{className:"mt-2 mb-2 text-light bg-dark-1 border border-secondary"},r.a.createElement(Y.a,{xs:10},r.a.createElement("h3",null,"Week of ","".concat(s).concat(o))),r.a.createElement(Y.a,{className:"toggle-collapse"},r.a.createElement(T.a,{className:"mt-2",size:"lg",onClick:function(){return l(!n)},icon:n?A.d:A.e}))),r.a.createElement(_.a,{in:n},r.a.createElement("div",null,r.a.createElement(se,{onUpdate:e.onUpdate,start:e.start,end:e.end,dates:e.dates}))))};var ce=function(e){return r.a.createElement(I.a,{className:"mt-2",variant:"danger"},r.a.createElement(I.a.Heading,null,"Session timed out."),r.a.createElement("p",null,"Please ",r.a.createElement(I.a.Link,{href:"/login",onClick:e.onLogout},"log out")," and log in again."))};var ie=function(e){var a=L()().startOf("day"),t=a.clone().endOf("week"),n=t.clone().add(1,"d").startOf("day"),l=n.clone().endOf("week"),s=l.clone().add(1,"d").startOf("day"),o=s.clone().endOf("week"),c=o.clone().add(1,"d").startOf("day"),i=c.clone().endOf("week"),m=i.clone().add(1,"d").startOf("day"),d=m.clone().endOf("week");return r.a.createElement(C.a,null,e.stale&&r.a.createElement(ce,{onLogout:e.onLogout}),r.a.createElement("h1",{className:"mt-4 mb-4"},"Upcoming Meals"),r.a.createElement(oe,{opened:!0,onUpdate:e.onUpdate,start:a,end:t,dates:e.dates}),r.a.createElement(oe,{opened:!1,onUpdate:e.onUpdate,start:n,end:l,dates:e.dates}),r.a.createElement(oe,{opened:!1,onUpdate:e.onUpdate,start:s,end:o,dates:e.dates}),r.a.createElement(oe,{opened:!1,onUpdate:e.onUpdate,start:c,end:i,dates:e.dates}),r.a.createElement(oe,{opened:!1,onUpdate:e.onUpdate,start:m,end:d,dates:e.dates}))},me=t(182),de=R.users_url,ue=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n.fileInput=r.a.createRef(),n.handleChange=n.handleChange.bind(Object(i.a)(n)),n.handleClick=n.handleClick.bind(Object(i.a)(n)),n.buildPreview=n.buildPreview.bind(Object(i.a)(n)),n.state={error:null,fileName:"",imageURI:null},n}return Object(c.a)(t,[{key:"handleSubmit",value:function(e){var a=this;e.preventDefault();var t=new FormData;t.append("file",this.fileInput.current.files[0]),h()({method:"post",url:de,data:t,headers:E()}).then((function(e){a.setState({error:null}),window.location.reload()})).catch((function(e){a.setState({error:e.response.data.message})}))}},{key:"buildPreview",value:function(){var e=null;return null!==this.state.imageURI&&(e=r.a.createElement("div",null,r.a.createElement("img",{className:"thumbnail",src:this.state.imageURI}))),e}},{key:"handleChange",value:function(e){if(e.target.files&&e.target.files.length>0){var a=e.target.files[0].name,t=new FileReader;t.onload=function(e){this.setState({fileName:a,imageURI:e.target.result})}.bind(this),t.readAsDataURL(e.target.files[0])}}},{key:"handleClick",value:function(e){var a=this;e.preventDefault(),h()({url:de,method:"delete",headers:E()}).then((function(){a.setState({error:null}),window.location.reload()})).catch((function(e){a.setState({error:e.response.data.message})}))}},{key:"render",value:function(){var e=this,a=this.buildPreview();return r.a.createElement(me.a,{onSubmit:this.handleSubmit},r.a.createElement(me.a.Group,null,r.a.createElement("label",{className:"submit-image"},"Select Image",r.a.createElement("input",{style:{display:"none"},type:"file",accept:".jpg, .jpeg, .png, .gif",ref:this.fileInput,required:!0,onChange:function(a){return e.handleChange(a)}}))),r.a.createElement(me.a.Group,null,a,this.state.fileName.length>0&&r.a.createElement("div",null,this.state.fileName)),r.a.createElement(me.a.Group,null,r.a.createElement(F.a,{variant:"primary",type:"submit"},r.a.createElement(T.a,{icon:A.h})," Upload")),this.props.hasOwnPic&&r.a.createElement(me.a.Group,null,r.a.createElement(F.a,{variant:"danger",onClick:function(a){return e.handleClick(a)}},r.a.createElement(T.a,{icon:A.g})," Delete Current Avatar")),null!==this.state.error&&r.a.createElement("div",null,this.state.error))}}]),t}(r.a.Component);var pe=function(e){return r.a.createElement(H.a,{show:e.show,onHide:e.onHide,size:"lg",backdrop:"static",centered:!0},r.a.createElement(H.a.Header,{closeButton:!0},r.a.createElement(H.a.Title,null,"Change Avatar")),r.a.createElement(H.a.Body,null,r.a.createElement(ue,{hasOwnPic:e.hasOwnPic,onHide:e.onHide})))};var be=function(e){return r.a.createElement(C.a,null,r.a.createElement("h2",null,"Oops, something went wrong!"),r.a.createElement("p",null,"Try refreshing the page or logging out, then logging back in again"))};var he=function(){return r.a.createElement(C.a,null,r.a.createElement("div",null,"Page loading..."))},fe="".concat(R.static_dir,"live/"),Ee="".concat(R.static_dir,"default/default_profile_picture.png"),ge="".concat(R.users_url);var ve=function(){var e=r.a.useState(""),a=Object(x.a)(e,2),t=a[0],n=a[1],l=r.a.useState(""),s=Object(x.a)(l,2),o=s[0],c=s[1],i=r.a.useState(""),m=Object(x.a)(i,2),d=m[0],u=m[1],p=r.a.useState(!1),b=Object(x.a)(p,2),f=b[0],g=b[1],v=r.a.useState(!1),y=Object(x.a)(v,2),N=y[0],k=y[1],w=r.a.useState(!1),S=Object(x.a)(w,2),O=S[0],M=S[1],U=r.a.useState(null),B=Object(x.a)(U,2),j=B[0],P=B[1];return r.a.useEffect((function(){h.a.get(ge,{headers:E()}).then((function(e){c(e.data.username),n(L()(e.data.birthday,"YYYY-MM-DD").format("MMMM Do, YYYY")),u(e.data.email),k(e.data.found),M(!0)}),(function(e){M(!1),P(e)}))}),[]),j?r.a.createElement(be,{error:j}):O?r.a.createElement(C.a,null,r.a.createElement("h1",{className:"text-center"},"".concat(o,"'s Profile")),N?r.a.createElement("img",{onClick:function(){return g(!0)},className:"mx-auto rounded-circle d-block",src:"".concat(fe).concat(o,".png"),alt:"".concat(o,"'s profile avatar")}):r.a.createElement("img",{onClick:function(){return g(!0)},className:"mx-auto rounded-circle d-block",src:Ee,alt:"Default profile avatar"}),r.a.createElement(pe,{hasOwnPic:N,show:f,onHide:function(){return g(!1)}}),r.a.createElement("div",{className:"text-center"},r.a.createElement(T.a,{icon:A.c})," ",d),r.a.createElement("div",{className:"text-center"},r.a.createElement(T.a,{icon:A.a})," ",t)):r.a.createElement(he,null)};var ye=function(e){return r.a.createElement("div",{className:"mt-3 mb-3 text-center"},"Made by Liversticks. Check out the source code ",r.a.createElement("a",{href:"https://github.com/Liversticks/meal-client"},"here."))},Ne=R.meal_url,ke=R.login_url,we=R.signup_url,Se=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).logout=n.logout.bind(Object(i.a)(n)),n.state={currentUser:f()?f():void 0,mealList:[],loginStale:!1},n.update=n.update.bind(Object(i.a)(n)),n}return Object(c.a)(t,[{key:"update",value:function(){var e=this,a=f();a&&this.setState({currentUser:a}),h.a.get(Ne,{headers:E()}).then((function(a){e.setState({mealList:a.data})})).catch((function(t){console.log(t.toString()),a&&e.setState({loginStale:!0})}))}},{key:"login",value:function(e,a){return h.a.post(ke,{username:e,password:a})}},{key:"onSignup",value:function(e,a,t,n){return h.a.post(we,{username:e,email:a,password:t,birthday:n})}},{key:"logout",value:function(){localStorage.removeItem("user"),localStorage.removeItem("username"),this.setState({loginStale:!1,profile:{username:"",email:"",birthday:""}})}},{key:"componentDidMount",value:function(){this.update()}},{key:"render",value:function(){return r.a.createElement(u.BrowserRouter,null,r.a.createElement(N,{isLoggedIn:void 0!==this.state.currentUser,onLogout:this.logout}),r.a.createElement("div",null,r.a.createElement(p.g,null,r.a.createElement(p.d,{exact:!0,path:["/","/meals"]},this.state.currentUser?r.a.createElement(ie,{onLogout:this.logout,stale:this.state.loginStale,onUpdate:this.update,dates:this.state.mealList}):r.a.createElement(p.c,{to:"/login"})),r.a.createElement(p.d,{exact:!0,path:"/login"},this.state.currentUser?r.a.createElement(p.c,{to:"/meals"}):r.a.createElement(j,{onLogin:this.login,onLoginSuccess:this.update})),r.a.createElement(p.d,{exact:!0,path:"/signup"},this.state.currentUser?r.a.createElement(p.c,{to:"/meals"}):r.a.createElement(M,{onSignup:this.onSignup})),r.a.createElement(p.d,{exact:!0,path:"/profile"},this.state.currentUser?r.a.createElement(ve,null):r.a.createElement(p.c,{to:"/login"})))),r.a.createElement("div",null,r.a.createElement(ye,null)))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.d55d8c4a.chunk.js.map